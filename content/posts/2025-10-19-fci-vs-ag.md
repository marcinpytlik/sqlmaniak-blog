---
title: "FCI czy AlwaysOn AG â€“ jak SQL trzyma fason po awarii"
date: 2025-10-19
slug: fci-vs-ag
tags: [SQLServer, HA, AlwaysOn, FCI, DBA, DisasterRecovery]
draft: false
---

FCI (Failover Cluster Instance) chroni instancjÄ™, AG (AlwaysOn Availability Groups) chroni dane.  
Oba majÄ… swoje miejsce, oba swoje puÅ‚apki.  
FCI to wspÃ³lny storage i klasyczna niezawodnoÅ›Ä‡. AG to elastycznoÅ›Ä‡, replikacja i odczyty.

> â€Awaria to egzamin z tego, jak myÅ›laÅ‚eÅ›, zanim siÄ™ zaczÄ™Å‚a.â€

## Architektura i filozofia
FCI to **jeden serwer logiczny rozÅ‚oÅ¼ony na kilka wÄ™zÅ‚Ã³w klastra**.  
JeÅ›li jeden padnie â€“ caÅ‚y SQL â€przenosi siÄ™â€ na inny, korzystajÄ…c z tego samego storageâ€™u.  
To oznacza: zero utraty danych, ale peÅ‚na zaleÅ¼noÅ›Ä‡ od wspÃ³lnego magazynu.  
W skrÃ³cie â€“ **chronisz instancjÄ™, nie bazÄ™**.

AG (AlwaysOn Availability Groups) to zupeÅ‚nie inna filozofia.  
Nie masz wspÃ³lnego storageâ€™u, tylko **replikacjÄ™ na poziomie logÃ³w transakcyjnych**.  
KaÅ¼dy wÄ™zeÅ‚ ma wÅ‚asne pliki danych, wÅ‚asny dysk, wÅ‚asny SQL.  
Chronisz wiÄ™c **dane, nie instancjÄ™** â€“ a w bonusie dostajesz skalowanie odczytÃ³w i backupy z replik wtÃ³rnych.

## WybÃ³r to nie religia
Nie ma â€lepszegoâ€ rozwiÄ…zania â€“ sÄ… tylko inne cele.  
JeÅ›li Twoim priorytetem jest **prosty failover** i Å›rodowisko SAN-owe â€“ wybierz FCI.  
JeÅ›li chcesz **redundancji danych**, **odczytÃ³w rozproszonych** i **kopii w chmurze** â€“ AG.  
W duÅ¼ych Å›rodowiskach te dwa Å›wiaty czÄ™sto siÄ™ **Å‚Ä…czÄ…**: FCI jako wysoka dostÄ™pnoÅ›Ä‡ w obrÄ™bie centrum danych, AG jako **disaster recovery** miÄ™dzy lokalizacjami.

WÅ‚aÅ›nie to poÅ‚Ä…czenie pokaÅ¼Ä™ Ci w nadchodzÄ…cym labie:  
SQL Server FCI w jednym regionie, a jego replika AG w drugim.  
Jedna awaria â€“ dwa mechanizmy HA â€“ i kilka ciekawych wnioskÃ³w o tym, jak SQL trzyma fason nawet w chaosie.

ğŸ“˜ **Repozytorium z konfiguracjÄ… i skryptami:**  
[github.com/marcinpytlik/SQLManiak/tree/master/docs/FCI-Windows2022-SQL2022](https://github.com/marcinpytlik/SQLManiak/tree/master/docs/FCI-Windows2022-SQL2022)

## ZÅ‚ote zasady projektanta HA
- Projektuj z myÅ›lÄ… o **punkcie odzysku (RPO)** i **czasie odzysku (RTO)**, nie o technologii.  
- Nie zakÅ‚adaj, Å¼e storage jest nieÅ›miertelny.  
- Testuj scenariusze failover â€“ nie w dokumentacji, tylko w realu.  
- Dokumentuj topologiÄ™, bo w stresie nikt nie bÄ™dzie zgadywaÅ‚, ktÃ³ra instancja jest primary.  

Wysoka dostÄ™pnoÅ›Ä‡ to nie konfiguracja â€“ to **sposÃ³b myÅ›lenia o ryzyku**.

---


